{
  "title": "Keyboard Text Shortcuts",
  "rules": [
    {
      "description": "Caps Lock dual-purpose: tap=Escape, hold+key=text shortcuts (Svorak layout)",
      "manipulators": [
        {
          "type": "basic",
          "from": {
            "key_code": "caps_lock",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "set_variable": {
                "name": "caps_lock_held",
                "value": 1
              }
            }
          ],
          "to_after_key_up": [
            {
              "set_variable": {
                "name": "caps_lock_held",
                "value": 0
              }
            }
          ],
          "to_if_alone": [
            {
              "key_code": "escape"
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+4 → Paste clipboard with lines joined (for clean prose)",
          "from": {
            "key_code": "4",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "bash -c 'pbpaste | tr \"\\n\" \" \" | tr -s \" \" | pbcopy' && osascript -e 'tell application \"System Events\" to keystroke \"v\" using command down'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+2 → Quote selection (copies, wraps in <quote> tags)",
          "from": {
            "key_code": "2",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'tell application \"System Events\" to keystroke \"c\" using command down' -e 'delay 0.2' -e 'set clipContent to the clipboard' -e 'set the clipboard to \"<quote>\" & return & clipContent & return & \"</quote>\" & return & return' -e 'tell application \"System Events\" to keystroke \"v\" using command down'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+3 → Resume from selection (copies, wraps in <before> tags)",
          "from": {
            "key_code": "3",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'tell application \"System Events\" to keystroke \"c\" using command down' -e 'delay 0.2' -e 'set clipContent to the clipboard' -e 'set the clipboard to \"<before>\" & return & clipContent & return & \"</before>\" & return & return & \"Proceed. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+Enter → Shift+Enter (safety: prevent accidental submit)",
          "from": {
            "key_code": "return_or_enter",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "key_code": "return_or_enter",
              "modifiers": ["shift"]
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+u → Unclear/examine assumptions (Svorak u = QWERTY f)",
          "from": {
            "key_code": "f",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"What's unclear or not obvious about this topic/situation/idea? Critically examine our assumptions and rank them from weakest to strongest, according to the evidence at hand, before proceeding. \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+c → Read relevant docs (Svorak c = QWERTY i)",
          "from": {
            "key_code": "i",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Read the most relevant 2-3 ones. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+p → Proceed (Svorak p = QWERTY r)",
          "from": {
            "key_code": "r",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Proceed. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+y → Challenge assumptions (Svorak y = QWERTY t)",
          "from": {
            "key_code": "t",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Why are we going down this road? Examine and challenge our crucial assumptions - list them out first and then attack them with critical thinking. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+s → Sit rep (Svorak s = QWERTY semicolon)",
          "from": {
            "key_code": "semicolon",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Sit rep. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+g → Git state (Svorak g = QWERTY u)",
          "from": {
            "key_code": "u",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"What's the git state? \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+d → Doc coherence check (Svorak d = QWERTY h)",
          "from": {
            "key_code": "h",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Make sure key docs are up to date and congruent with our findings/progress/reasoning/decisions/ideas. Remember the documentation philosophy/strategy. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+e → Explore without changing (Svorak e = QWERTY d)",
          "from": {
            "key_code": "d",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"Don't make changes. Explore and report back. \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+a → Delegate to subagent (Svorak a = QWERTY a)",
          "from": {
            "key_code": "a",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Put a subagent on researching this thoroughly. Report back with findings. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+x → Git workflow finisher (Svorak x = QWERTY b)",
          "from": {
            "key_code": "b",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Commit everything in (chrono)logical groups. Then push. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+r → Enumerate docs (Svorak r = QWERTY o)",
          "from": {
            "key_code": "o",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"List 30 recent .md docs related to this work/topic. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+n → Plan progress check (Svorak n = QWERTY l)",
          "from": {
            "key_code": "l",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"What's next according to the plan? \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+t → Run tests (Svorak t = QWERTY k)",
          "from": {
            "key_code": "k",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Run the tests. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+ö → Search online (Svorak ö = QWERTY e)",
          "from": {
            "key_code": "e",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Search online for this. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+w → Wait/Hold (Svorak w = QWERTY comma)",
          "from": {
            "key_code": "comma",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"Don't act on anything before I've made any important decisions that need to be made about where to go. \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+å → Summarize (Svorak å = QWERTY q)",
          "from": {
            "key_code": "q",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Summarize briefly. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+f → Fix this (Svorak f = QWERTY y)",
          "from": {
            "key_code": "y",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Fix this. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+h → Clarity / load-bearing idea (Svorak h = QWERTY j)",
          "from": {
            "key_code": "j",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"Help me see this clearly: what's the load-bearing idea/s? One bridging analogy. Competing perspectives if relevant. And after you have answered that: what doesn't fit neatly into that view? \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+j → Document insights (Svorak j = QWERTY c)",
          "from": {
            "key_code": "c",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Document insights where appropriate. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+m → /recall (Svorak m = QWERTY m)",
          "from": {
            "key_code": "m",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/recall \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+k → /capture (Svorak k = QWERTY v)",
          "from": {
            "key_code": "v",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/capture \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+i → /significance (Svorak i = QWERTY g)",
          "from": {
            "key_code": "g",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/significance \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+b → /debug-session (Svorak b = QWERTY n)",
          "from": {
            "key_code": "n",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/debug-session \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+l → /ui-prototype (Svorak l = QWERTY p)",
          "from": {
            "key_code": "p",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/ui-prototype \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+o → /consensus-consult (Svorak o = QWERTY s)",
          "from": {
            "key_code": "s",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/consensus-consult \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+q → /docs-review (Svorak q = QWERTY x)",
          "from": {
            "key_code": "x",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/docs-review \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+ä → Zoom out / open loops check (Svorak ä = QWERTY w)",
          "from": {
            "key_code": "w",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Let'\\''s zoom out. How did we get here? What were we in the middle of? Are there any open loops we forgot about? \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+. → Pull and push (Svorak . = QWERTY z)",
          "from": {
            "key_code": "z",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Pull and push. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+v → Research extensively (Svorak v = QWERTY period)",
          "from": {
            "key_code": "period",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Research this extensively online. \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+z → /total-recap (Svorak z = QWERTY slash)",
          "from": {
            "key_code": "slash",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"/total-recap \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        }
      ]
    }
  ]
}

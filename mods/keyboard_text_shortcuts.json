{
  "title": "Keyboard Text Shortcuts",
  "rules": [
    {
      "description": "Caps Lock dual-purpose: tap=Escape, hold+key=text shortcuts (Svorak layout)",
      "manipulators": [
        {
          "type": "basic",
          "from": {
            "key_code": "caps_lock",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "set_variable": {
                "name": "caps_lock_held",
                "value": 1
              }
            }
          ],
          "to_after_key_up": [
            {
              "set_variable": {
                "name": "caps_lock_held",
                "value": 0
              }
            }
          ],
          "to_if_alone": [
            {
              "key_code": "escape"
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+u → Ultrathink (Svorak u = QWERTY f)",
          "from": {
            "key_code": "f",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+c → Continue. Ultrathink (Svorak c = QWERTY i)",
          "from": {
            "key_code": "i",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Continue. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+y → Yes! Ultrathink (Svorak y = QWERTY t)",
          "from": {
            "key_code": "t",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Yes! Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+p → Proceed. Ultrathink (Svorak p = QWERTY r)",
          "from": {
            "key_code": "r",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Proceed. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+s → Sit rep. Ultrathink (Svorak s = QWERTY semicolon)",
          "from": {
            "key_code": "semicolon",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Sit rep. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+g → What's the git state? Ultrathink (Svorak g = QWERTY u)",
          "from": {
            "key_code": "u",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"What's the git state? Ultrathink \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+d → Doc coherence check (Svorak d = QWERTY h)",
          "from": {
            "key_code": "h",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Make sure key docs are up to date and congruent with our progress. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+e → Explore without changing (Svorak e = QWERTY d)",
          "from": {
            "key_code": "d",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"Don't make changes. Explore and report back. Ultrathink \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+a → Delegate to subagent (Svorak a = QWERTY a)",
          "from": {
            "key_code": "a",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Put a subagent on researching this thoroughly. Report back with findings. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+x → Git workflow finisher (Svorak x = QWERTY b)",
          "from": {
            "key_code": "b",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Commit everything in logical groups. Then push. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+r → Context refresh (Svorak r = QWERTY o)",
          "from": {
            "key_code": "o",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e 'set the clipboard to \"Read up on the relevant docs to refresh your memory first. Ultrathink \"' -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        },
        {
          "type": "basic",
          "description": "Caps+n → Plan progress check (Svorak n = QWERTY l)",
          "from": {
            "key_code": "l",
            "modifiers": {
              "optional": ["any"]
            }
          },
          "to": [
            {
              "shell_command": "osascript -e 'set prev to the clipboard' -e \"set the clipboard to \\\"What's next according to the plan? Ultrathink \\\"\" -e 'tell application \"System Events\" to keystroke \"v\" using command down' -e 'delay 0.1' -e 'set the clipboard to prev'"
            }
          ],
          "conditions": [
            {
              "type": "variable_if",
              "name": "caps_lock_held",
              "value": 1
            }
          ]
        }
      ]
    }
  ]
}
